---
title: "PUNA: actualizaci√≥n de indicadores y nuevos lineamientos de trabajo"
description: |
  Publicaci√≥n de informaci√≥n actualizada sobre alojamiento colectivo al 2021 y novedades en el an√°lisis y gesti√≥n de los datos.
date: 2023-04-03
output:
  distill::distill_article:
    self_contained: true
draft: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

library(tidyverse)
library(sf)
library(comunicacion)
library(herramientas)
library(gt)
library(cowplot)

```

El Padr√≥n √önico Nacional de Alojamiento (PUNA) es la principal fuente de datos sobre la oferta de alojamiento de Argentina, dado que se elabora a partir de la consolidaci√≥n de los registros de los distintos organismos provinciales y municipales de turismo y el INDEC. Para conocer m√°s sobre la fuente visite el [post de bit√°cora del PUNA](https://bitacora.yvera.tur.ar/posts/2022-06-16-datos-puna/).

En esta oportunidad se presentan los datos actualizados al a√±o 2021, los cuales fueron compilados en el [documento de trabajo N¬∞10](https://biblioteca.yvera.tur.ar/). En el mismo se muestra, adem√°s, avances realizados en la georreferenciaci√≥n de las localidades registradas en el PUNA, para un mejor conocimiento de su distribuci√≥n territorial. Por √∫ltimo, se comentan algunas l√≠neas de trabajo, presentes y futuras, en base a la gesti√≥n de la base de datos y sus usos.

# Resumen de indicadores

```{r}
puna <- read_file_srv("puna/serie_puna.csv") %>% 
  filter(anio == 2021) %>% 
  etiquetar_provincia(provincia) %>% 
  mutate(provincia_nombre = case_when(
    str_detect(provincia_nombre, "Tierra") ~ "Tierra del Fuego",
                                      TRUE ~ provincia_nombre)
    )
```

En el a√±o 2021, se registr√≥ un total de 19.945 establecimientos y 783.687 plazas a lo largo de todo el pa√≠s.

```{r}
puna %>% 
  group_by(tipo) %>% 
  summarise(Establecimientos = sum(establecimientos),
            Plazas = sum(plazas)) %>% 
  ungroup() %>% 
  janitor::adorn_totals() %>% 
  pivot_longer(c("Establecimientos","Plazas")) %>% 
  arrange(match(tipo, c("Hoteleros","Parahoteleros","Otros colectivos"))) %>% 
  pivot_wider(names_from = "tipo", values_from = "value") %>% 
  gt() %>% 
  cols_label(name = "") %>% 
  fmt_number(columns = c(2:5), decimals = 0, sep_mark = ".") %>% 
  tab_options(column_labels.font.weight = "bold")
```

El PUNA cuenta, entre sus variables, con una clasificaci√≥n de los alojamientos. Esta clasificaci√≥n se construye a partir de las categor√≠as que registran las distintas provincias, las cuales se armonizan con fines comparativos y de an√°lisis. Adem√°s, esta clasificaci√≥n permite asociar la oferta de alojamiento con la elaboraci√≥n de estrategias de desarrollo tur√≠stico, por ejemplo, al hablar de Turismo Rural nos puede interesar poner foco en los alojamientos clasificados como "Establecimientos rurales", mientras que para el Turismo Social nos centrar√≠amos en los "Hoteles sindicales/mutuales".

En la siguiente tabla se caracteriza cada una de las 27 categor√≠as presentes en el PUNA de acuerdo a la cantidad de plazas, establecimientos y el promedio de plazas por establecimiento. De esta manera, se puede ver que las categor√≠as con mayor cantidad de plazas no son necesariamente las que tienen m√°s establecimientos o mayor promedio de plazas por establecimiento. 

Por ejemplo, los hoteles 5 estrellas cuentan con pocos establecimientos, en comparaci√≥n con el resto de las categor√≠as, pero son los que tienen m√°s plazas por establecimiento ya que suelen contar con muchas habitaciones y espacios para organizar eventos de todo tipo.

```{r}
data_cuadro1 <- puna %>% 
  group_by(clasificacion_mintur) %>% 
  summarise(establecimientos = sum(establecimientos),
            plazas = sum(plazas)) %>% 
  ungroup() %>% 
  arrange(desc(plazas)) %>% 
  mutate(rank_pla = row_number()) %>% 
  arrange(desc(establecimientos)) %>% 
   mutate(rank_est = row_number(),
          prom_pla = plazas/establecimientos) %>% 
  arrange(desc(prom_pla)) %>% 
   mutate(rank_prom = row_number())

data_cuadro1 %>% 
  arrange(desc(plazas)) %>% 
  gt() %>% 
   cols_label(
    clasificacion_mintur = "",
    establecimientos = "Cantidad",
    plazas = "Cantidad",
    prom_pla = "Cantidad",
    rank_pla = "Ranking",
    rank_est = "Ranking",
    rank_prom = "Ranking"
  ) %>% 
  fmt_number(columns = c(2:7), decimals = 0, dec_mark = ",", sep_mark = ".") %>% 
   cols_align(
    align = "center",
    columns = c(establecimientos, plazas))  %>% 
  opt_table_font(
    font = "Encode Sans"
  ) %>%
  tab_spanner(
    label = md("**Establecimientos**"),
    columns = c(establecimientos, rank_est)) %>%
  tab_spanner(
    label = md("**Plazas**"),
    columns = c(plazas, rank_pla)) %>%
  tab_spanner(
    label = md("**Plazas/establecimientos**"),
    columns = c(prom_pla, rank_prom)) %>%
   tab_options(column_labels.font.weight = "bold",
              table.font.size = 11,
              data_row.padding = px(2)) %>% 
  sub_zero(columns = everything(),
              zero_text  = "///")

```


# ¬øD√≥nde se localizan los alojamientos?

Otro dato de relevancia que ofrece el PUNA es la distribuci√≥n territorial de los establecimientos y plazas. En este sentido, los registros a partir de los cuales se recopila la informaci√≥n, brindan la posibilidad de ver los indicadores a nivel de [Ruta Natural](https://larutanatural.gob.ar/es), regiones, provincia, departamento/partido o localidad. Sin embargo, no se cuenta con una geolocalizaci√≥n, a nivel de latitud y longitud, de todos los alojamientos. 

En relaci√≥n a este punto, se trabaj√≥ en la georreferenciaci√≥n local del PUNA, para lo cual se utiliz√≥ la [Base de Asentamientos Humanos de la Rep√∫blica Argentina (BAHRA)](http://www.bahra.gob.ar/) para asignar una ubicaci√≥n en el mapa a los establecimientos, a nivel de localidad. El ejercicio permiti√≥ geolocalizar a m√°s del 99% de los registros, en tanto se encontraron algunos obst√°culos a la hora de cruzar ambas bases (por ejemplo, localidades en PUNA que no constitu√≠an entidades en el BAHRA).

De esta forma, se pueden graficar los datos con mayor precisi√≥n, pasando de una agrupaci√≥n por provincia (pol√≠gonos), a una por departamento/partido (pol√≠gonos m√°s peque√±os), a una por localidad (puntos), tal como se visualiza en la siguiente imagen:

```{r}
#Provincias
argentina <- geoAr::get_geo("ARGENTINA","provincia") %>% 
  geoAr::add_geo_codes() %>% 
  select(provincia = name_iso)

data_mapa <- puna %>%
  group_by(provincia_nombre) %>% 
  summarise(plazas = sum(plazas)) %>% 
  ungroup() %>% 
  left_join(argentina, by = c("provincia_nombre"="provincia")) %>% 
  st_as_sf()

caba <- data_mapa %>% 
  filter(str_detect(provincia_nombre,"Ciudad"))

arg_mapa <- data_mapa %>% 
  ggplot() +
  geom_sf(aes(fill = plazas)) +
  scale_fill_dnmye(discrete = F, limits = c(min(data_mapa$plazas),
                                            max(data_mapa$plazas)),
                     breaks = c(min(data_mapa$plazas),
                                            max(data_mapa$plazas)),
                   #palette = "dicotomica",
                   reverse = T) +
  labs(fill = "Plazas\n ") + 
  theme_void() +
  theme(legend.position = "bottom",
        text = element_text(size=9),
        legend.key.height= unit(0.5, 'cm'))

caba_mapa <- caba %>% 
  ggplot() +
  geom_sf(aes(fill = plazas)) +
  scale_fill_dnmye(discrete = F, limits = c(min(data_mapa$plazas),
                                            max(data_mapa$plazas)),
                   #palette = "dicotomica", 
                   reverse = T) +
  theme_void() +
  theme(legend.position = "none")

mapa_prov <- arg_mapa %>% 
   ggdraw() +
  draw_plot(caba_mapa,
    x = 0.75, 
    y = 0.6,
    width = 0.1, 
    height = 0.1)

#Deptos
puna_deptos <- read_sf("/srv/DataDNMYE/capas_sig/puna_departamentos_bahra.gpkg")

caba <- puna_deptos %>% 
  filter(str_detect(provincia,"ciudad"))

arg_mapa <- ggplot() +
  geom_sf(data = argentina, fill = "grey") +
  geom_sf(data = puna_deptos, aes(fill = plazas)) +
  scale_fill_dnmye(discrete = F, limits = c(min(puna_deptos$plazas),
                                            max(puna_deptos$plazas)),
                    breaks = c(min(puna_deptos$plazas),
                                            max(puna_deptos$plazas)),
                   #palette = "dicotomica",
                   reverse = T) +
  labs(fill = "") +
  theme_void() +
  theme(legend.position = "bottom",
        text = element_text(size=9),
        legend.key.height= unit(0.5, 'cm'))

caba_mapa <- caba %>% 
  ggplot() +
  geom_sf(aes(fill = plazas)) +
   # geom_sf_label(aes(label = plazas), size = 3, 
   #              label.padding = unit(1, units = "mm"),
   #              label.size = 0.4) +
  scale_fill_dnmye(discrete = F, limits = c(min(puna_deptos$plazas),
                                            max(puna_deptos$plazas)),
                   #palette = "dicotomica", 
                   reverse = T) +
  theme_void() +
  theme(legend.position = "none")

mapa_depto <- arg_mapa %>% 
   ggdraw() +
  draw_plot(caba_mapa,
    x = 0.77, 
    y = 0.6,
    width = 0.1, 
    height = 0.1)

#Localidades
puna_localidades <- read_sf("/srv/DataDNMYE/capas_sig/puna_localidades_bahra.gpkg") %>% 
  etiquetar_provincia(id_col = provincia, new_name = "provincia_nombre") %>% 
  mutate(provincia_nombre = str_replace(
    provincia_nombre,
     "Tierra del Fuego, Ant√°rtida e Islas del Atl√°ntico Sur", "Tierra del Fuego"))

mapa_loc <- ggplot() +
  geom_sf(data = argentina, fill = "white") +
  geom_sf(data = puna_localidades, aes(color = plazas), 
          alpha = 0.7, size = 1) +
   scale_color_dnmye(discrete = F, limits = c(min(puna_localidades$plazas),
                                            max(puna_localidades$plazas)),
                     breaks = c(min(puna_localidades$plazas),
                                            max(puna_localidades$plazas)),
                   #palette = "dicotomica",
                   reverse = T) +
  labs(color = "") +
  theme_void() +
   theme(legend.position = "bottom",
        text = element_text(size=9),
        legend.key.height= unit(0.5, 'cm'))

plot_grid(mapa_prov, mapa_depto, mapa_loc, 
          ncol = 3)

```

A su vez, podemos bajar en el an√°lisis espacial hacia el interior de una provincia o departamento/partido, por ejemplo de la provincia de Buenos Aires y ver la distribuci√≥n de localidades registradas en el PUNA.

```{r}
data_prov <- puna_localidades %>% 
  filter(provincia == "buenos aires")

labels <- data_prov %>%
  filter(localidad %in% c("mar del plata",
                          "villa gesell",
                          "pinamar")) %>% 
  mutate(localidad = toupper(localidad))

ggplot() +
  geom_sf(data = puna_deptos %>% filter(provincia == "buenos aires"), 
          fill = "white", color = dnmye_colores("gris oscuro")) +
  geom_sf(data = data_prov, 
          aes(size = plazas),
          color = dnmye_colores("purpura"),
          alpha = 0.7) +
  ggrepel::geom_label_repel(data = labels,
                  aes(geometry = geom, label = localidad), 
                  size = 3, 
                label.padding = unit(1, units = "mm"),
                #direction = "x", 
                nudge_x = 2,
                stat = "sf_coordinates",
                min.segment.length = 0.1,
                label.size = 0.3) +
  coord_sf(xlim = c(-63.38, -54.66)) +
  labs(size = "Plazas") +
  theme_void() +
  theme(legend.position = "left")
```

# L√≠neas de trabajo

Respecto de la georreferenciaci√≥n, el ejercicio realizado abre las puertas para avanzar en al menos dos l√≠neas de trabajo con datos espaciales, a saber:

- Cruce con otra informaci√≥n geogr√°fica para conocer conectividad, cercan√≠a a atractivos, etc., as√≠ como realizar an√°lisis exploratorios en el campo de la geoestad√≠stica para su aplicaci√≥n en la gesti√≥n del turismo.
- Avanzar en la asignaci√≥n de latitud y longitud a nivel de establecimiento, para mejorar la calidad de los datos y su an√°lisis.

Por otro parte, desde la Direcci√≥n Nacional de Mercados y Estad√≠stica se viene trabajando en la elaboraci√≥n del [Sistema Federal de Gesti√≥n de Datos Tur√≠sticos de la Argentina](https://datatur.yvera.tur.ar/ ), un portal para la gesti√≥n y consolidaci√≥n de indicadores tur√≠sticos por parte de los organismos p√∫blicos nacionales, provinciales y locales.

Dicho portal cuenta con un primer m√≥dulo operativo que permite la integraci√≥n de datos de eventos y temporadas. Un segundo m√≥dulo apunta a gestionar los datos del PUNA, ofreciendo a los organismos la posibilidad de informar altas y bajas, realizar modificaciones, calcular indicadores y descargar registros. De esta forma, se podr√° administrar, consolidar y analizar la informaci√≥n de la oferta de alojamiento de una manera m√°s sistem√°tica.

# Recursos

- [Documento de trabajo]()

- [Datos abiertos](https://datos.yvera.gob.ar/dataset/padron-unico-nacional-alojamiento)

- [Tablero](https://tableros.yvera.tur.ar/puna)

::: {.infobox}
Para recibir las novedades del SINTA escrib√≠le al bot de Telegram de la DNMyE <a href=‚Äòhttps://bitacora.yvera.tur.ar/posts/2022-09-08-sintia/‚Äô target=‚Äò_blank‚Äô>*SintIA*</a>: <a href=‚Äòhttps://t.me/RDatinaBot‚Äô target=‚Äò_blank‚Äô>@RDatinaBot</a> ü§ñ
:::